<?php
$filterDataCombined = $block->getRequest()->getParam('filter_data_combined');
$logger = $block->getLogger();
$logger->info('Filter Data Combined in Template: ' . json_encode($filterDataCombined));
?>

<div class="sidebar sidebar-main">
    <div class="block filter">
        <div class="block-title filter-title">
            <strong>Shop By</strong>
        </div>
        <div class="block-content filter-content">
            <strong role="heading" aria-level="2" class="block-subtitle filter-subtitle">Shopping Options</strong>
            <dl class="filter-options" id="narrow-by-list">
                <?php foreach ($filterDataCombined as $attributeCode => $options): ?>
                    <?php if (!empty($options)): ?>
                        <dt role="heading" aria-level="3" class="filter-options-title">
                            <?= $escaper->escapeHtml($attributeCode) ?>
                        </dt>
                        <dd class="filter-options-content">
                            <ol class="items">
                                <?php foreach ($options as $optionId => $optionData): ?>
                                    <li class="item">
                                        <span class="item-label"><?= $escaper->escapeHtml($optionData['label']) ?></span>
                                        <span class="count">
                                            <?= $optionData['count'] ?>
                                            <span class="filter-count-label">items</span>
                                        </span>
                                    </li>
                                <?php endforeach; ?>
                            </ol>
                        </dd>
                    <?php endif; ?>
                <?php endforeach; ?>
            </dl>
        </div>
    </div>
</div>
